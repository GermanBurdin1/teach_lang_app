<div class="container mt-4" [ngStyle]="{ 'backgroundImage': backgroundStyle, 'backgroundSize': 'cover' }">

<!-- 🔧 Боковые вкладки -->
<div class="side-tabs">
  <div class="tab-button left-tab"
       (click)="selectView('board')"
       [class.active]="showBoard && !showGabarit"
       title="Afficher le tableau">
    🧑‍🏫
    <div class="label">Tableau interactif</div>
  </div>

  <div class="tab-button right-tab"
       (click)="toggleGabarit()"
       [class.active]="showGabarit"
       title="Afficher les matériaux">
    📂
    <div class="label">matériaux</div>
  </div>
</div>



  <div class="row justify-content-center align-items-start video-wrapper position-relative">

    <!-- Основной видео+доска блок -->
    <div class="col-md-10 d-flex justify-content-center position-relative">

      <!-- 📋 Интерактивная доска -->
      <app-interactive-board *ngIf="showBoard" class="whiteboard-layer position-absolute top-0 start-0 w-100 h-100">
      </app-interactive-board>

      <!-- 🎥 Видео -->
      <app-video-call *ngIf="videoService.showVideoCall$ | async" [isFloatingMode]="true" class="floating-video-layer">
      </app-video-call>


      <!-- 📁 Gabarit -->
      <app-gabarit-page *ngIf="showGabarit" [lesson]="currentLesson" [readonly]="true">
      </app-gabarit-page>

    </div>

    <!-- 🧩 Нижняя панель заданий -->
    <div class="fixed-task-panel bg-light px-4 py-2" [class.collapsed]="tasksCollapsed">
      <div class="collapse-toggle" (click)="toggleTasksCollapsed()">
        {{ tasksCollapsed ? '🔼' : '🔽' }}
      </div>

      <div *ngIf="!tasksCollapsed" class="d-flex justify-content-between">
        <!-- Студент -->
        <div class="student-zone w-50 pe-2">
          <h5>👨‍🎓 Étudiant</h5>
          <div *ngIf="currentLesson?.studentTasks?.length">
            <div *ngFor="let task of currentLesson.studentTasks" class="badge bg-primary m-1">{{ task }}</div>
          </div>
          <div *ngIf="currentLesson?.studentQuestions?.length">
            <div *ngFor="let q of currentLesson.studentQuestions" class="badge bg-info m-1">{{ q }}</div>
          </div>
        </div>

        <!-- Преподаватель -->
        <div class="teacher-zone w-50 ps-2">
          <h5>👩‍🏫 Enseignant</h5>
          <div *ngFor="let task of currentLesson?.teacherTasks" class="badge bg-warning text-dark m-1">
            {{ task }}
          </div>
        </div>
      </div>
    </div>




  </div>
</div>
