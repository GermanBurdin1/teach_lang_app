<div class="container mt-4" [ngStyle]="{ 'backgroundImage': backgroundStyle, 'backgroundSize': 'cover' }">

<!-- ğŸ”§ Ğ‘Ğ¾ĞºĞ¾Ğ²Ñ‹Ğµ Ğ²ĞºĞ»Ğ°Ğ´ĞºĞ¸ -->
<div class="side-tabs">
  <div class="tab-button left-tab"
       (click)="selectView('board')"
       [class.active]="showBoard && !showGabarit"
       title="Afficher le tableau">
    ğŸ§‘â€ğŸ«
    <div class="label">Tableau interactif</div>
  </div>

  <div class="tab-button right-tab"
       (click)="toggleGabarit()"
       [class.active]="showGabarit"
       title="Afficher les matÃ©riaux">
    ğŸ“‚
    <div class="label">matÃ©riaux</div>
  </div>
</div>



  <div class="row justify-content-center align-items-start video-wrapper position-relative">

    <!-- ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ğ²Ğ¸Ğ´ĞµĞ¾+Ğ´Ğ¾ÑĞºĞ° Ğ±Ğ»Ğ¾Ğº -->
    <div class="col-md-10 d-flex justify-content-center position-relative">

      <!-- ğŸ“‹ Ğ˜Ğ½Ñ‚ĞµÑ€Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ°Ñ Ğ´Ğ¾ÑĞºĞ° -->
      <app-interactive-board *ngIf="showBoard" class="whiteboard-layer position-absolute top-0 start-0 w-100 h-100">
      </app-interactive-board>

      <!-- ğŸ¥ Ğ’Ğ¸Ğ´ĞµĞ¾ -->
      <app-video-call *ngIf="videoService.showVideoCall$ | async" [isFloatingMode]="true" class="floating-video-layer">
      </app-video-call>


      <!-- ğŸ“ Gabarit -->
      <app-gabarit-page *ngIf="showGabarit" [lesson]="currentLesson" [readonly]="true">
      </app-gabarit-page>

    </div>

    <!-- ğŸ§© ĞĞ¸Ğ¶Ğ½ÑÑ Ğ¿Ğ°Ğ½ĞµĞ»ÑŒ Ğ·Ğ°Ğ´Ğ°Ğ½Ğ¸Ğ¹ -->
    <div class="fixed-task-panel bg-light px-4 py-2" [class.collapsed]="tasksCollapsed">
      <div class="collapse-toggle" (click)="toggleTasksCollapsed()">
        {{ tasksCollapsed ? 'ğŸ”¼' : 'ğŸ”½' }}
      </div>

      <div *ngIf="!tasksCollapsed" class="d-flex justify-content-between">
        <!-- Ğ¡Ñ‚ÑƒĞ´ĞµĞ½Ñ‚ -->
        <div class="student-zone w-50 pe-2">
          <h5>ğŸ‘¨â€ğŸ“ Ã‰tudiant</h5>
          <div *ngIf="currentLesson?.studentTasks?.length">
            <div *ngFor="let task of currentLesson.studentTasks" class="badge bg-primary m-1">{{ task }}</div>
          </div>
          <div *ngIf="currentLesson?.studentQuestions?.length">
            <div *ngFor="let q of currentLesson.studentQuestions" class="badge bg-info m-1">{{ q }}</div>
          </div>
        </div>

        <!-- ĞŸÑ€ĞµĞ¿Ğ¾Ğ´Ğ°Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ -->
        <div class="teacher-zone w-50 ps-2">
          <h5>ğŸ‘©â€ğŸ« Enseignant</h5>
          <div *ngFor="let task of currentLesson?.teacherTasks" class="badge bg-warning text-dark m-1">
            {{ task }}
          </div>
        </div>
      </div>
    </div>




  </div>
</div>
