<div *ngIf="grammar" class="grammar-fields">
  <div class="grammar-fields__section">
    <mat-form-field appearance="outline" class="grammar-fields__mat-field">
      <mat-label>Partie du discours</mat-label>
      <mat-select [(ngModel)]="grammar!.partOfSpeech" (ngModelChange)="onPartOfSpeechSelect($event)">
        <mat-option *ngFor="let option of partOfSpeechOptions" [value]="option">
          {{ option }}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </div>

  <ng-container [ngSwitch]="grammar.partOfSpeech">

    <!-- Nom -->
    <ng-container *ngSwitchCase="'noun'">
      <div class="grammar-fields__section">
        <mat-form-field appearance="outline" class="grammar-fields__mat-field">
          <mat-label>Genre</mat-label>
          <mat-select [ngModel]="noun?.gender" (ngModelChange)="updateField('gender', $event)">
            <mat-option [value]="undefined">—</mat-option>
            <mat-option value="masculine">masculin</mat-option>
            <mat-option value="feminine">féminin</mat-option>
            <mat-option value="neuter">neutre</mat-option>
          </mat-select>
        </mat-form-field>
        
        <mat-form-field appearance="outline" class="grammar-fields__mat-field">
          <mat-label>Nombre</mat-label>
          <mat-select [ngModel]="noun?.number" (ngModelChange)="updateField('number', $event)">
            <mat-option [value]="undefined">—</mat-option>
            <mat-option value="singular">singulier</mat-option>
            <mat-option value="plural">pluriel</mat-option>
          </mat-select>
        </mat-form-field>
        
        <div class="grammar-fields__checkbox-wrapper" *ngIf="noun">
          <mat-checkbox [(ngModel)]="noun.isProper" (ngModelChange)="updateField('isProper', $event)">
            Nom propre
          </mat-checkbox>
        </div>
      </div>
    </ng-container>

    <!-- Verbe -->
    <ng-container *ngSwitchCase="'verb'">
      <div class="grammar-fields__section">
        <mat-form-field appearance="outline" class="grammar-fields__mat-field">
          <mat-label>Transitivité</mat-label>
          <mat-select [ngModel]="verb?.transitivity" (ngModelChange)="updateField('transitivity', $event)">
            <mat-option [value]="undefined">—</mat-option>
            <mat-option value="transitive">transitif</mat-option>
            <mat-option value="intransitive">intransitif</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </ng-container>

    <!-- Adjectif -->
    <ng-container *ngSwitchCase="'adjective'">
      <div class="grammar-fields__section">
        <mat-form-field appearance="outline" class="grammar-fields__mat-field">
          <mat-label>Degré de comparaison</mat-label>
          <mat-select [ngModel]="adjective?.comparison" (ngModelChange)="updateField('comparison', $event)">
            <mat-option [value]="undefined">—</mat-option>
            <mat-option value="positive">positif</mat-option>
            <mat-option value="comparative">comparatif</mat-option>
            <mat-option value="superlative">superlatif</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </ng-container>

    <!-- Adverbe -->
    <ng-container *ngSwitchCase="'adverb'">
      <div class="grammar-fields__section">
        <mat-form-field appearance="outline" class="grammar-fields__mat-field">
          <mat-label>Degré de comparaison</mat-label>
          <mat-select [ngModel]="adverb?.comparison" (ngModelChange)="updateField('comparison', $event)">
            <mat-option [value]="undefined">—</mat-option>
            <mat-option value="positive">positif</mat-option>
            <mat-option value="comparative">comparatif</mat-option>
            <mat-option value="superlative">superlatif</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </ng-container>

    <!-- Pronom -->
    <ng-container *ngSwitchCase="'pronoun'">
      <div class="grammar-fields__section">
        <mat-form-field appearance="outline" class="grammar-fields__mat-field">
          <mat-label>Personne</mat-label>
          <mat-select [ngModel]="pronoun?.person" (ngModelChange)="updateField('person', $event)">
            <mat-option [value]="undefined">—</mat-option>
            <mat-option [value]="1">1ère personne</mat-option>
            <mat-option [value]="2">2ème personne</mat-option>
            <mat-option [value]="3">3ème personne</mat-option>
          </mat-select>
        </mat-form-field>
        
        <mat-form-field appearance="outline" class="grammar-fields__mat-field">
          <mat-label>Genre</mat-label>
          <mat-select [ngModel]="pronoun?.gender" (ngModelChange)="updateField('gender', $event)">
            <mat-option [value]="undefined">—</mat-option>
            <mat-option value="masculine">masculin</mat-option>
            <mat-option value="feminine">féminin</mat-option>
            <mat-option value="neuter">neutre</mat-option>
          </mat-select>
        </mat-form-field>
        
        <mat-form-field appearance="outline" class="grammar-fields__mat-field">
          <mat-label>Nombre</mat-label>
          <mat-select [ngModel]="pronoun?.number" (ngModelChange)="updateField('number', $event)">
            <mat-option [value]="undefined">—</mat-option>
            <mat-option value="singular">singulier</mat-option>
            <mat-option value="plural">pluriel</mat-option>
          </mat-select>
        </mat-form-field>
        
        <mat-form-field appearance="outline" class="grammar-fields__mat-field">
          <mat-label>Type</mat-label>
          <mat-select [ngModel]="pronoun?.type" (ngModelChange)="updateField('type', $event)">
            <mat-option [value]="undefined">—</mat-option>
            <mat-option value="personal">personnel</mat-option>
            <mat-option value="possessive">possessif</mat-option>
            <mat-option value="reflexive">réfléchi</mat-option>
            <mat-option value="demonstrative">démonstratif</mat-option>
            <mat-option value="interrogative">interrogatif</mat-option>
            <mat-option value="relative">relatif</mat-option>
            <mat-option value="indefinite">indéfini</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </ng-container>

    <!-- Conjonction -->
    <ng-container *ngSwitchCase="'conjunction'">
      <div class="grammar-fields__section">
        <mat-form-field appearance="outline" class="grammar-fields__mat-field">
          <mat-label>Type</mat-label>
          <mat-select [ngModel]="conjunction?.type" (ngModelChange)="updateField('type', $event)">
            <mat-option [value]="undefined">—</mat-option>
            <mat-option value="coordinating">coordination</mat-option>
            <mat-option value="subordinating">subordination</mat-option>
            <mat-option value="correlative">corrélative</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </ng-container>

    <!-- Interjection -->
    <ng-container *ngSwitchCase="'interjection'">
      <div class="grammar-fields__section">
        <mat-form-field appearance="outline" class="grammar-fields__mat-field">
          <mat-label>Type d'émotion</mat-label>
          <input matInput [ngModel]="interjection?.emotionType"
            (ngModelChange)="updateField('emotionType', $event)" placeholder="par exemple : surprise" />
        </mat-form-field>
      </div>
    </ng-container>

    <!-- Expression -->
    <ng-container *ngSwitchCase="'expression'">
      <div class="grammar-fields__section">
        <mat-form-field appearance="outline" class="grammar-fields__mat-field">
          <mat-label>Type d'expression</mat-label>
          <mat-select [ngModel]="expression?.expressionType" (ngModelChange)="updateField('expressionType', $event)">
            <mat-option [value]="undefined">—</mat-option>
            <mat-option value="idiom">Idiome</mat-option>
            <mat-option value="proverb">Proverbe</mat-option>
            <mat-option value="saying">Dicton</mat-option>
            <mat-option value="collocation">Expression figée</mat-option>
            <mat-option value="quote">Citation</mat-option>
            <mat-option value="other">Autre</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline" class="grammar-fields__mat-field">
          <mat-label>Origine (facultatif)</mat-label>
          <input matInput [ngModel]="expression?.origin" (ngModelChange)="updateField('origin', $event)"
            placeholder="par exemple : proverbe français" />
        </mat-form-field>
      </div>
    </ng-container>

  </ng-container>

  <div class="grammar-fields__save" *ngIf="showValidateButton">
    <button mat-raised-button color="primary" class="grammar-fields__button" (click)="validate()">
      Valider
    </button>
  </div>
</div>
