<div
  [ngClass]="{
    'node-wrapper': true,
    'zoomed-wrapper': node.id === zoomedNode?.id
  }"
  [ngStyle]="getNodeStyle()"
  (click)="node.id !== zoomedNode?.id && onSelect()">


  <!-- Кнопка справа: 🔍 или ➕ -->
  <div class="add-button right" *ngIf="selected" (click)="zoomOrAddChild($event)"
    [title]="isTopLevel ? 'нырнуть в узел' : 'добавить дочерний элемент'">
    {{ isTopLevel ? '🔍' : '➕' }}
  </div>


  <!-- Кнопка снизу (родственный элемент) — только если не корень -->
  <div class="add-button bottom" *ngIf="selected && node.parentId" (click)="onAddSibling($event)"
    title="добавить родственную тему">➕</div>

  <!-- Сам узел -->
  <div class="node" [attr.id]="'node-' + node.id">
    <textarea class="node-title" [(ngModel)]="node.title" rows="1" (click)="$event.stopPropagation()"
      (input)="resizeTextArea($event)">
    </textarea>
  </div>
</div>
