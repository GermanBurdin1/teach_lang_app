<div class="node-wrapper" [class.selected]="isSelected" draggable="true" (dragstart)="onDragStart($event)"
  (dragover)="onDragOver($event)" (drop)="onDrop($event)" (dragend)="onDragEnd()"
  [ngStyle]="{ left: node.x + 'px', top: node.y + 'px' }" (click)="onClick($event)"
  [class.dimmed]="!isActiveModalNode && isAnyModalOpen" [class.foreground]="isActiveModalNode">
  <!-- ĞšĞ½Ğ¾Ğ¿ĞºĞ° ÑĞ¿Ñ€Ğ°Ğ²Ğ° (Ğ´Ğ¾Ñ‡ĞµÑ€Ğ½Ğ¸Ğ¹ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚) -->
  <div class="add-button right" *ngIf="isSelected" (click)="onAddChild($event)" title="Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ´Ğ¾Ñ‡ĞµÑ€Ğ½Ğ¸Ğ¹ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚">â•
  </div>

  <!-- ĞšĞ½Ğ¾Ğ¿ĞºĞ° ÑĞ½Ğ¸Ğ·Ñƒ (Ñ€Ğ¾Ğ´ÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚) â€” Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ĞµÑĞ»Ğ¸ Ğ½Ğµ ĞºĞ¾Ñ€ĞµĞ½ÑŒ -->
  <div class="add-button bottom" *ngIf="isSelected && node.parentId" (click)="onAddSibling($event)"
    title="Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ñ€Ğ¾Ğ´ÑÑ‚Ğ²ĞµĞ½Ğ½ÑƒÑ Ñ‚ĞµĞ¼Ñƒ">â•</div>

  <!-- Ğ¡Ğ°Ğ¼ ÑƒĞ·ĞµĞ» -->
  <div class="node" [attr.id]="'node-' + node.id">
    <textarea #textAreaRef class="node-title" [(ngModel)]="node.title" rows="1"
      placeholder="Entrez un titre en franÃ§ais" (click)="$event.stopPropagation()" (input)="resizeTextArea($event)">
    </textarea>
    <div class="icon-row" *ngIf="node.parentId !== null">
      <span class="icon-btn" (click)="toggleModal('rule', $event)" title="ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ¾">ğŸ“˜</span>
      <span class="icon-btn" (click)="toggleModal('exception', $event)" title="Ğ˜ÑĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ">âš ï¸</span>
      <span class="icon-btn" (click)="toggleModal('example', $event)" title="ĞŸÑ€Ğ¸Ğ¼ĞµÑ€">ğŸ’¡</span>
      <span class="icon-btn" (click)="toggleModal('exercise', $event)" title="Ğ£Ğ¿Ñ€Ğ°Ğ¶Ğ½ĞµĞ½Ğ¸Ğµ">ğŸ“</span>
  </div>

</div>
<!-- ĞšĞ½Ğ¾Ğ¿ĞºĞ° ÑĞ²Ğ¾Ñ€Ğ°Ñ‡Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ/Ñ€Ğ°Ğ·Ğ²Ğ¾Ñ€Ğ°Ñ‡Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ -->
<div class="toggle-expand" *ngIf="hasChildren(node)" (click)="onZoom()"
  [title]="node.expanded ? 'Ğ¡Ğ²ĞµÑ€Ğ½ÑƒÑ‚ÑŒ Ğ´Ğ¾Ñ‡ĞµÑ€Ğ½Ğ¸Ğµ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ñ‹' : 'Ğ Ğ°Ğ·Ğ²ĞµÑ€Ğ½ÑƒÑ‚ÑŒ Ğ´Ğ¾Ñ‡ĞµÑ€Ğ½Ğ¸Ğµ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ñ‹'">
  {{ node.expanded ? 'â–' : 'â•' }}
</div>

</div>
