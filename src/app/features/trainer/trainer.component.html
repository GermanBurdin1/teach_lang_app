<div class="trainer-container">
  <h2>üéì –¢—Ä–µ–Ω–∞–∂—ë—Ä</h2>

  <div class="trainer-tabs">
    <button (click)="setActiveTab('audio')" [class.active]="activeTab === 'audio'">üéß –ê—É–¥–∏—Ä–æ–≤–∞–Ω–∏–µ</button>
    <button (click)="setActiveTab('reading')" [class.active]="activeTab === 'reading'">üìñ –ß—Ç–µ–Ω–∏–µ</button>
    <button (click)="setActiveTab('writing')" [class.active]="activeTab === 'writing'">‚úç –ü–∏—Å—å–º–æ</button>
    <button (click)="setActiveTab('speaking')" [class.active]="activeTab === 'speaking'">üó£ –£—Å—Ç–Ω–∞—è —Ä–µ—á—å</button>
    <button (click)="setActiveTab('grammar')" [class.active]="activeTab === 'grammar'">üìö –ì—Ä–∞–º–º–∞—Ç–∏–∫–∞</button>
    <button (click)="setActiveTab('exam')" [class.active]="activeTab === 'exam'">üéØ –≠–∫–∑–∞–º–µ–Ω</button>
  </div>

  <!-- –ê—É–¥–∏—Ä–æ–≤–∞–Ω–∏–µ -->
  <div *ngIf="activeTab === 'audio'">
    <h3>üé§ –ê—É–¥–∏—Ä–æ–≤–∞–Ω–∏–µ</h3>

    <div class="audio-tabs">
      <button (click)="setAudioTask('dictation')" [class.active]="audioTask === 'dictation'">üìù –î–∏–∫—Ç–∞–Ω—Ç</button>
      <button (click)="setAudioTask('choice')" [class.active]="audioTask === 'choice'">‚úÖ –í—ã–±–æ—Ä –æ—Ç–≤–µ—Ç–∞</button>
      <button (click)="setAudioTask('sequence')" [class.active]="audioTask === 'sequence'">üîÑ –†–∞—Å—Å—Ç–∞–Ω–æ–≤–∫–∞
        —Å–æ–±—ã—Ç–∏–π</button>
      <button (click)="setAudioTask('paraphrase')" [class.active]="audioTask === 'paraphrase'">‚úç
        –ü–µ—Ä–µ—Ñ—Ä–∞–∑–∏—Ä–æ–≤–∞–Ω–∏–µ</button>
      <button (click)="setAudioTask('intonation')" [class.active]="audioTask === 'intonation'">üé≠ –ò–Ω—Ç–æ–Ω–∞—Ü–∏—è</button>
    </div>

    <audio controls>
      <source src="{{ currentAudio }}" type="audio/mpeg">
    </audio>

    <!-- –î–∏–∫—Ç–∞–Ω—Ç —Å –ø—Ä–æ–ø—É—Å–∫–∞–º–∏ -->
    <div *ngIf="audioTask === 'dictation'">
      <h4>üìù –î–∏–∫—Ç–∞–Ω—Ç —Å –ø—Ä–æ–ø—É—Å–∫–∞–º–∏</h4>
      <p>{{ maskedText }}</p>
      <input [(ngModel)]="userDictation" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ —Å–ª–æ–≤–∞..." />
      <button (click)="checkDictation()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
      <p *ngIf="resultDictation">{{ resultDictation }}</p>
    </div>

    <!-- –í—ã–±–æ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ -->
    <div *ngIf="audioTask === 'choice'">
      <h4>‚úÖ –í—ã–±–æ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞</h4>
      <div *ngFor="let option of choiceOptions">
        <button (click)="checkChoice(option)">{{ option }}</button>
      </div>
      <p *ngIf="resultChoice">{{ resultChoice }}</p>
    </div>

    <!-- –†–∞—Å—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–æ–±—ã—Ç–∏–π -->
    <div *ngIf="audioTask === 'sequence'">
      <h4>üîÑ –†–∞—Å—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–æ–±—ã—Ç–∏–π</h4>
      <ul>
        <li *ngFor="let event of shuffledEvents" (click)="reorder(event)">
          {{ event }}
        </li>
      </ul>
      <button (click)="checkSequence()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
      <p *ngIf="resultSequence">{{ resultSequence }}</p>
    </div>

    <!-- –ü–µ—Ä–µ—Ñ—Ä–∞–∑–∏—Ä–æ–≤–∞–Ω–∏–µ -->
    <div *ngIf="audioTask === 'paraphrase'">
      <h4>‚úç –ü–µ—Ä–µ—Ñ—Ä–∞–∑–∏—Ä–æ–≤–∞–Ω–∏–µ</h4>
      <textarea [(ngModel)]="paraphraseInput" placeholder="–ü–µ—Ä–µ–¥–∞–π—Ç–µ —É—Å–ª—ã—à–∞–Ω–Ω–æ–µ —Å–≤–æ–∏–º–∏ —Å–ª–æ–≤–∞–º–∏..."></textarea>
      <button (click)="checkParaphrase()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
      <p *ngIf="resultParaphrase">{{ resultParaphrase }}</p>
    </div>

    <!-- –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∏–Ω—Ç–æ–Ω–∞—Ü–∏–∏ -->
    <div *ngIf="audioTask === 'intonation'">
      <h4>üé≠ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏–Ω—Ç–æ–Ω–∞—Ü–∏–∏</h4>
      <p>–ö–∞–∫–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ —É –≥–æ–≤–æ—Ä—è—â–µ–≥–æ?</p>
      <div>
        <button (click)="checkIntonation('joy')">üòä –†–∞–¥–æ—Å—Ç—å</button>
        <button (click)="checkIntonation('anger')">üò° –ì–Ω–µ–≤</button>
        <button (click)="checkIntonation('sarcasm')">ü§® –°–∞—Ä–∫–∞–∑–º</button>
      </div>
      <p *ngIf="resultIntonation">{{ resultIntonation }}</p>
    </div>
  </div>

  <!-- –ß—Ç–µ–Ω–∏–µ -->
  <div *ngIf="activeTab === 'reading'">
    <h3>üìñ –¢—Ä–µ–Ω–∞–∂—ë—Ä—ã –¥–ª—è —á—Ç–µ–Ω–∏—è</h3>

    <div class="reading-tabs">
      <button (click)="setReadingTask('matchTitle')" [class.active]="readingTask === 'matchTitle'">üìå –ù–∞–π–¥–∏
        —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ</button>
      <button (click)="setReadingTask('mainIdea')" [class.active]="readingTask === 'mainIdea'">üí° –°–º—ã—Å–ª–æ–≤–æ–π
        –∞–Ω–∞–ª–∏–∑</button>
      <button (click)="setReadingTask('paraphrase')" [class.active]="readingTask === 'paraphrase'">‚úç
        –ü–µ—Ä–µ—Ñ—Ä–∞–∑–∏—Ä–æ–≤–∞–Ω–∏–µ</button>
      <button (click)="setReadingTask('argumentation')" [class.active]="readingTask === 'argumentation'">üìä
        –ê—Ä–≥—É–º–µ–Ω—Ç–∞—Ü–∏—è</button>
    </div>

    <!-- –ù–∞–π–¥–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ -->
    <div *ngIf="readingTask === 'matchTitle'">
      <h4>üìå –ù–∞–π–¥–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫</h4>
      <p>{{ readingText }}</p>
      <div *ngFor="let option of readingOptions">
        <button (click)="checkReading(option)">{{ option }}</button>
      </div>
      <p *ngIf="readingResult">{{ readingResult }}</p>
    </div>

    <!-- –°–º—ã—Å–ª–æ–≤–æ–π –∞–Ω–∞–ª–∏–∑ -->
    <div *ngIf="readingTask === 'mainIdea'">
      <h4>üí° –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –æ—Å–Ω–æ–≤–Ω—É—é –º—ã—Å–ª—å</h4>
      <p>{{ analysisText }}</p>
      <div *ngFor="let option of analysisOptions">
        <button (click)="checkMainIdea(option)">{{ option }}</button>
      </div>
      <p *ngIf="analysisResult">{{ analysisResult }}</p>
    </div>

    <!-- –ü–µ—Ä–µ—Ñ—Ä–∞–∑–∏—Ä–æ–≤–∞–Ω–∏–µ -->
    <div *ngIf="readingTask === 'paraphrase'">
      <h4>‚úç –ü–µ—Ä–µ—Ñ—Ä–∞–∑–∏—Ä—É–π—Ç–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ</h4>
      <p>{{ paraphraseText }}</p>
      <textarea [(ngModel)]="paraphraseReadingInput" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ –ø–µ—Ä–µ—Ñ—Ä–∞–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ..."></textarea>
      <button (click)="checkReadingParaphrase()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
      <p *ngIf="readingParaphraseResult">{{ readingParaphraseResult }}</p>
    </div>

    <!-- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞—Ü–∏–∏ -->
    <div *ngIf="readingTask === 'argumentation'">
      <h4>üìä –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —Ç–µ–∑–∏—Å—ã –∏ –∞—Ä–≥—É–º–µ–Ω—Ç—ã</h4>
      <p>{{ argumentationText }}</p>
      <p>–ö–∞–∫–æ–≤–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–∞—Ü–∏–∏?</p>
      <div *ngFor="let option of argumentationOptions">
        <button (click)="checkArgumentation(option)">{{ option }}</button>
      </div>
      <p *ngIf="argumentationResult">{{ argumentationResult }}</p>
    </div>
  </div>

  <!-- –ü–∏—Å—å–º–æ -->
  <div *ngIf="activeTab === 'writing'">
    <h3>‚úç –¢—Ä–µ–Ω–∞–∂—ë—Ä—ã –¥–ª—è –ø–∏—Å—å–º–∞</h3>

    <div class="writing-tabs">
      <button (click)="setWritingTask('plan')" [class.active]="writingTask === 'plan'">üìú –°–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ø–ª–∞–Ω–∞</button>
      <button (click)="setWritingTask('styleCheck')" [class.active]="writingTask === 'styleCheck'">üßê –ê–≤—Ç–æ–ø—Ä–æ–≤–µ—Ä–∫–∞
        —Å—Ç–∏–ª—è</button>
      <button (click)="setWritingTask('expressions')" [class.active]="writingTask === 'expressions'">üí¨ –¢—Ä–µ–Ω–∞–∂—ë—Ä
        –≤—ã—Ä–∞–∂–µ–Ω–∏–π</button>
      <button (click)="setWritingTask('topicGeneration')" [class.active]="writingTask === 'topicGeneration'">üé≤
        –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–º</button>
      <button (click)="setWritingTask('errorCorrection')" [class.active]="writingTask === 'errorCorrection'">‚úÖ
        –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫</button>
    </div>

    <!-- –°–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ø–ª–∞–Ω–∞ -->
    <div *ngIf="writingTask === 'plan'">
      <h4>üìú –°–æ—Å—Ç–∞–≤—å—Ç–µ –ø–ª–∞–Ω —ç—Å—Å–µ</h4>
      <textarea [(ngModel)]="essayPlan" placeholder="Introduction, d√©veloppement, conclusion..."></textarea>
      <button (click)="checkEssayPlan()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
      <p *ngIf="essayFeedback">{{ essayFeedback }}</p>
    </div>

    <!-- –ê–≤—Ç–æ–ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∏–ª—è -->
    <div *ngIf="writingTask === 'styleCheck'">
      <h4>üßê –ê–≤—Ç–æ–ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∏–ª—è</h4>
      <textarea [(ngModel)]="essayText" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞..."></textarea>
      <button (click)="checkStyle()">–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å</button>
      <p *ngIf="styleFeedback">{{ styleFeedback }}</p>
    </div>

    <!-- –¢—Ä–µ–Ω–∞–∂—ë—Ä –≤—ã—Ä–∞–∂–µ–Ω–∏–π -->
    <div *ngIf="writingTask === 'expressions'">
      <h4>üí¨ –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ</h4>
      <p>{{ expressionSentence }}</p>
      <div *ngFor="let option of expressionOptions">
        <button (click)="checkExpression(option)">{{ option }}</button>
      </div>
      <p *ngIf="expressionFeedback">{{ expressionFeedback }}</p>
    </div>

    <!-- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–º -->
    <div *ngIf="writingTask === 'topicGeneration'">
      <h4>üé≤ –°–ª—É—á–∞–π–Ω–∞—è —Ç–µ–º–∞ —ç—Å—Å–µ</h4>
      <p><strong>–¢–µ–º–∞:</strong> {{ generatedTopic }}</p>
      <button (click)="generateTopic()">üîÑ –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—É—é —Ç–µ–º—É</button>
      <textarea [(ngModel)]="generatedEssayPlan" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–ª–∞–Ω —ç—Å—Å–µ..."></textarea>
      <button (click)="checkGeneratedPlan()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
      <p *ngIf="generatedPlanFeedback">{{ generatedPlanFeedback }}</p>
    </div>

    <!-- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ -->
    <div *ngIf="writingTask === 'errorCorrection'">
      <h4>‚úÖ –ò—Å–ø—Ä–∞–≤—å—Ç–µ –æ—à–∏–±–∫–∏ –≤ —Ç–µ–∫—Å—Ç–µ</h4>
      <p>{{ incorrectSentence }}</p>
      <textarea [(ngModel)]="correctedSentence" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç..."></textarea>
      <button (click)="checkCorrection()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
      <p *ngIf="correctionFeedback">{{ correctionFeedback }}</p>
    </div>
  </div>

  <!-- –£—Å—Ç–Ω–∞—è —Ä–µ—á—å -->
  <div *ngIf="activeTab === 'speaking'">
    <h3>üó£ –¢—Ä–µ–Ω–∞–∂—ë—Ä—ã —É—Å—Ç–Ω–æ–π —Ä–µ—á–∏</h3>

    <div class="speaking-tabs">
      <button (click)="setSpeakingTask('argumentation')" [class.active]="speakingTask === 'argumentation'">üì¢ –†–∞–∑–±–æ—Ä
        –∞—Ä–≥—É–º–µ–Ω—Ç–∞—Ü–∏–∏</button>
      <button (click)="setSpeakingTask('improvTopics')" [class.active]="speakingTask === 'improvTopics'">üé≠
        –ò–º–ø—Ä–æ–≤–∏–∑–∞—Ü–∏—è</button>
      <button (click)="setSpeakingTask('translation')" [class.active]="speakingTask === 'translation'">üåç –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π
        –ø–µ—Ä–µ–≤–æ–¥</button>
      <button (click)="setSpeakingTask('dialogues')" [class.active]="speakingTask === 'dialogues'">üí¨ –†–∞–∑–≥–æ–≤–æ—Ä–Ω—ã–µ
        —Å—Ü–µ–Ω–∞—Ä–∏–∏</button>
      <button (click)="setSpeakingTask('intonation')" [class.active]="speakingTask === 'intonation'">üé§ –ò–Ω—Ç–æ–Ω–∞—Ü–∏—è –∏
        –∞–∫—Ü–µ–Ω—Ç</button>
    </div>

    <!-- –†–∞–∑–±–æ—Ä –∞—Ä–≥—É–º–µ–Ω—Ç–∞—Ü–∏–∏ -->
    <div *ngIf="speakingTask === 'argumentation'">
      <h4>üì¢ –ó–∞–ø–∏—à–∏—Ç–µ –≥–æ–ª–æ—Å–æ–≤–æ–π –æ—Ç–≤–µ—Ç</h4>
      <p><b>{{ speakingQuestion }}</b></p>
      <button (click)="startRecording()">üé§ –ó–∞–ø–∏—Å–∞—Ç—å</button>
      <p *ngIf="recording">{{ recordingMessage }}</p>
    </div>

    <!-- –ò–º–ø—Ä–æ–≤–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ–º—ã -->
    <div *ngIf="speakingTask === 'improvTopics'">
      <h4>üé≠ –ò–º–ø—Ä–æ–≤–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ç–µ–º–∞</h4>
      <p><strong>–¢–µ–º–∞:</strong> {{ improvTopic }}</p>
      <button (click)="generateImprovTopic()">üîÑ –ù–æ–≤–∞—è —Ç–µ–º–∞</button>
      <p>–£ –≤–∞—Å –µ—Å—Ç—å <b>60 —Å–µ–∫—É–Ω–¥</b>, —á—Ç–æ–±—ã –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å—Å—è.</p>
      <button (click)="startImprovTimer()">‚è≥ –ù–∞—á–∞—Ç—å –æ—Ç—Å—á—ë—Ç</button>
      <p *ngIf="improvTimer">{{ improvTimerMessage }}</p>
    </div>

    <!-- –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ -->
    <div *ngIf="speakingTask === 'translation'">
      <h4>üåç –ü–µ—Ä–µ–≤–µ–¥–∏—Ç–µ —Ñ—Ä–∞–∑—É</h4>
      <p><i>{{ translationSentence }}</i></p>
      <textarea [(ngModel)]="userTranslation" placeholder="–ü–µ—Ä–µ–≤–µ–¥–∏—Ç–µ –∑–¥–µ—Å—å..."></textarea>
      <button (click)="checkTranslation()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
      <p *ngIf="translationFeedback">{{ translationFeedback }}</p>
    </div>

    <!-- –†–∞–∑–≥–æ–≤–æ—Ä–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ -->
    <div *ngIf="speakingTask === 'dialogues'">
      <h4>üí¨ –í—ã–±–µ—Ä–∏—Ç–µ –æ—Ç–≤–µ—Ç –≤ –¥–∏–∞–ª–æ–≥–µ</h4>
      <p>{{ dialoguePrompt }}</p>
      <div *ngFor="let option of dialogueOptions">
        <button (click)="checkDialogue(option)">{{ option }}</button>
      </div>
      <p *ngIf="dialogueFeedback">{{ dialogueFeedback }}</p>
    </div>

    <!-- –ò–Ω—Ç–æ–Ω–∞—Ü–∏—è –∏ –∞–∫—Ü–µ–Ω—Ç -->
    <div *ngIf="speakingTask === 'intonation'">
      <h4>üé§ –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –∏–Ω—Ç–æ–Ω–∞—Ü–∏—é</h4>
      <p>{{ intonationSentence }}</p>
      <button (click)="checkIntonation('joy')">üòä –†–∞–¥–æ—Å—Ç—å</button>
      <button (click)="checkIntonation('anger')">üò° –ì–Ω–µ–≤</button>
      <button (click)="checkIntonation('sarcasm')">ü§® –°–∞—Ä–∫–∞–∑–º</button>
      <p *ngIf="intonationFeedback">{{ intonationFeedback }}</p>
    </div>
  </div>


  <!-- –ì—Ä–∞–º–º–∞—Ç–∏–∫–∞ –∏ –ª–µ–∫—Å–∏–∫–∞ -->
  <div *ngIf="activeTab === 'grammar'">
    <h3>üìö –¢—Ä–µ–Ω–∞–∂—ë—Ä—ã –ø–æ –≥—Ä–∞–º–º–∞—Ç–∏–∫–µ –∏ –ª–µ–∫—Å–∏–∫–µ</h3>

    <div class="grammar-tabs">
      <button (click)="setGrammarTask('connectors')" [class.active]="grammarTask === 'connectors'">üîó –°–≤—è–∑–∫–∏</button>
      <button (click)="setGrammarTask('sentenceBuilder')" [class.active]="grammarTask === 'sentenceBuilder'">üìù
        –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π</button>
      <button (click)="setGrammarTask('miniGames')" [class.active]="grammarTask === 'miniGames'">üéÆ –ú–∏–Ω–∏-–∏–≥—Ä—ã</button>
      <button (click)="setGrammarTask('context')" [class.active]="grammarTask === 'context'">üìñ –õ–µ–∫—Å–∏–∫–∞ –≤
        –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ</button>
      <button (click)="setGrammarTask('synonyms')" [class.active]="grammarTask === 'synonyms'">üîÑ –°–∏–Ω–æ–Ω–∏–º—ã –∏
        –∞–Ω—Ç–æ–Ω–∏–º—ã</button>
    </div>

    <!-- –¢—Ä–µ–Ω–∞–∂—ë—Ä —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π —Ñ—Ä–∞–∑ -->
    <div *ngIf="grammarTask === 'connectors'">
      <h4>üîó –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –ª–æ–≥–∏—á–µ—Å–∫—É—é —Å–≤—è–∑–∫—É</h4>
      <p>{{ sentenceWithBlank }}</p>
      <div *ngFor="let option of connectorOptions">
        <button (click)="checkConnector(option)">{{ option }}</button>
      </div>
      <p *ngIf="connectorResult">{{ connectorResult }}</p>
    </div>

    <!-- –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π -->
    <div *ngIf="grammarTask === 'sentenceBuilder'">
      <h4>üìù –°–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ</h4>
      <p>–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Å–ª–æ–≤–∞ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ:</p>
      <ul>
        <li *ngFor="let word of shuffledSentenceWords" (click)="reorderSentence(word)">
          {{ word }}
        </li>
      </ul>
      <button (click)="checkSentenceOrder()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
      <p *ngIf="sentenceOrderResult">{{ sentenceOrderResult }}</p>
    </div>

    <!-- –ì—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–∏–Ω–∏-–∏–≥—Ä—ã -->
    <div *ngIf="grammarTask === 'miniGames'">
      <h4>üéÆ –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Ñ–æ—Ä–º—É –≥–ª–∞–≥–æ–ª–∞</h4>
      <p>{{ verbQuestion }}</p>
      <div *ngFor="let option of verbOptions">
        <button (click)="checkVerb(option)">{{ option }}</button>
      </div>
      <p *ngIf="verbResult">{{ verbResult }}</p>
    </div>

    <!-- –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π —Ç—Ä–µ–Ω–∞–∂—ë—Ä –ª–µ–∫—Å–∏–∫–∏ -->
    <div *ngIf="grammarTask === 'context'">
      <h4>üìñ –í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â–µ–µ —Å–ª–æ–≤–æ</h4>
      <p>{{ contextSentence }}</p>
      <div *ngFor="let option of contextOptions">
        <button (click)="checkContext(option)">{{ option }}</button>
      </div>
      <p *ngIf="contextResult">{{ contextResult }}</p>
    </div>

    <!-- –°–∏–Ω–æ–Ω–∏–º—ã –∏ –∞–Ω—Ç–æ–Ω–∏–º—ã -->
    <div *ngIf="grammarTask === 'synonyms'">
      <h4>üîÑ –ü–æ–¥–±–µ—Ä–∏—Ç–µ —Å–∏–Ω–æ–Ω–∏–º</h4>
      <p>{{ synonymQuestion }}</p>
      <div *ngFor="let option of synonymOptions">
        <button (click)="checkSynonym(option)">{{ option }}</button>
      </div>
      <p *ngIf="synonymResult">{{ synonymResult }}</p>
    </div>
  </div>


  <!-- –≠–∫–∑–∞–º–µ–Ω -->
  <div *ngIf="activeTab === 'exam'">
    <h3>üéØ –°–∏–º—É–ª—è—Ü–∏—è —ç–∫–∑–∞–º–µ–Ω–∞</h3>
    <button (click)="startExam()" *ngIf="!examStarted">üì¢ –ù–∞—á–∞—Ç—å —ç–∫–∑–∞–º–µ–Ω</button>

    <div *ngIf="examStarted">
      <p><b>–≠–∫–∑–∞–º–µ–Ω –Ω–∞—á–∞–ª—Å—è! –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–¥–∞–Ω–∏—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ.</b></p>

      <!-- –¢–µ—Å—Ç –ø–æ –∞—É–¥–∏—Ä–æ–≤–∞–Ω–∏—é -->
      <div *ngIf="examStep === 'listening'">
        <h4>üéß –ê—É–¥–∏—Ä–æ–≤–∞–Ω–∏–µ</h4>
        <audio controls>
          <source src="{{ examAudio }}" type="audio/mpeg">
        </audio>
        <p>–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç:</p>
        <div *ngFor="let option of listeningOptions">
          <button (click)="checkListening(option)">{{ option }}</button>
        </div>
      </div>

      <!-- –¢–µ—Å—Ç –ø–æ —á—Ç–µ–Ω–∏—é -->
      <div *ngIf="examStep === 'reading'">
        <h4>üìñ –ß—Ç–µ–Ω–∏–µ</h4>
        <p>{{ examReadingText }}</p>
        <p>–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç:</p>
        <div *ngFor="let option of readingOptions">
          <button (click)="checkReading(option)">{{ option }}</button>
        </div>
      </div>

      <!-- –ü–∏—Å—å–º–µ–Ω–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ -->
      <div *ngIf="examStep === 'writing'">
        <h4>‚úç –ü–∏—Å—å–º–æ</h4>
        <p>–ù–∞–ø–∏—à–∏—Ç–µ —Ç–µ–∫—Å—Ç –ø–æ —Å–ª–µ–¥—É—é—â–µ–π —Ç–µ–º–µ:</p>
        <p><b>{{ examWritingTopic }}</b></p>
        <textarea [(ngModel)]="examWritingAnswer" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –æ—Ç–≤–µ—Ç..."></textarea>
        <button (click)="checkWriting()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
      </div>

      <!-- –£—Å—Ç–Ω–∞—è —Ä–µ—á—å -->
      <div *ngIf="examStep === 'speaking'">
        <h4>üó£ –£—Å—Ç–Ω–∞—è —Ä–µ—á—å</h4>
        <p>–ó–∞–ø–∏—à–∏—Ç–µ –≥–æ–ª–æ—Å–æ–≤–æ–π –æ—Ç–≤–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å:</p>
        <p><b>{{ examSpeakingQuestion }}</b></p>
        <button (click)="startSpeakingExam()">üé§ –ó–∞–ø–∏—Å–∞—Ç—å</button>
        <p *ngIf="speakingRecording">{{ speakingRecordingMessage }}</p>
      </div>

      <!-- –ò—Ç–æ–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç -->
      <div *ngIf="examStep === 'results'">
        <h4>‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —ç–∫–∑–∞–º–µ–Ω–∞</h4>
        <p>üéØ –í–∞—à–∏ –±–∞–ª–ª—ã: <b>{{ examScore }}/100</b></p>
        <p *ngIf="examFeedback">{{ examFeedback }}</p>
        <button (click)="restartExam()">üîÑ –ü—Ä–æ–π—Ç–∏ –µ—â—ë —Ä–∞–∑</button>
      </div>
    </div>
  </div>

</div>
