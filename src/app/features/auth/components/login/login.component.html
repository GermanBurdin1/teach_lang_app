<div class="form-wrapper">
  <div class="form-container">
    <div class="theme-toggle" (click)="toggleTheme()">
      {{ isDarkTheme ? '‚òÄÔ∏è Light' : 'üåô Dark' }}
    </div>
    <div class="logo-container">
      <!-- 
        TODO: –°–æ–∑–¥–∞—Ç—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é –ª–æ–≥–æ—Ç–∏–ø–∞ 150x60px 
        –¥–ª—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è NG0913 –æ —Ä–∞–∑–º–µ—Ä–∞—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
      -->
      <img src="assets/logo/linguaconnect-high-resolution-logo-transparent.png" 
           alt="Linguaconnect Logo" 
           class="main-logo"
           width="150" 
           height="60"
           loading="eager"
           fetchpriority="high">
    </div>
    <h2>Connexion</h2>

    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
      <!-- Email -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Email</mat-label>
        <input matInput formControlName="email" type="email" required (blur)="onEmailBlur()" autocomplete="username" />
        <mat-hint id="email-help" [ngStyle]="getHintStyles()">Entrez votre e-mail</mat-hint>
      </mat-form-field>

      <!-- –í—ã–±–æ—Ä —Ä–æ–ª–∏, –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ –±–æ–ª—å—à–µ –æ–¥–Ω–æ–π -->
      <div *ngIf="emailChecked && availableRoles.length > 1" class="role-selection mt-3">
        <p class="mb-2">Choisissez un r√¥le :</p>
        <mat-button-toggle-group formControlName="selectedRole" class="w-100" appearance="legacy">

          <mat-button-toggle *ngFor="let role of availableRoles" [value]="role">
            {{ role === 'student' ? '√âtudiant(e)' : role === 'teacher' ? 'Enseignant(e)' : role }}
          </mat-button-toggle>
        </mat-button-toggle-group>
      </div>

      <!-- Password -->
      <mat-form-field appearance="outline" class="full-width mt-3">
        <mat-label>Mot de passe</mat-label>
        <input matInput [type]="showPassword ? 'text' : 'password'" formControlName="password" required (focus)="onPasswordFocus()" 
               aria-describedby="password-help"
               aria-required="true"
               autocomplete="current-password" />

        <button mat-icon-button matSuffix type="button" (click)="showPassword = !showPassword"
          [attr.aria-label]="'Voir mot de passe'" [attr.aria-pressed]="showPassword">
          <mat-icon>{{ showPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
        </button>
        <mat-hint id="password-help" [ngStyle]="getHintStyles()">Entrez votre mot de passe</mat-hint>
      </mat-form-field>

      <!-- Remember Me -->
      <div class="remember-me-container mt-3">
        <mat-checkbox formControlName="rememberMe" class="remember-me-checkbox">
          Se souvenir de moi
        </mat-checkbox>
      </div>

      <!-- Submit -->
      <div class="mt-3">
        <button mat-raised-button type="submit" class="login-button"
          [ngClass]="{ 'disabled-button': loginForm.invalid }" [disabled]="loginForm.invalid">
          Se connecter
        </button>



      </div>

      <!-- Link to register -->
      <div class="auth-link mt-3">
        <div class="auth-question">Pas encore de compte ?</div>
        <a routerLink="/register">Inscrivez-vous</a>
      </div>
    </form>
  </div>
</div>
