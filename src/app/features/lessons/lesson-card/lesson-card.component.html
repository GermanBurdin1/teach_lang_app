<div class="lesson-card">

  <!-- ğŸ§‘â€ğŸ« En-tÃªte de lâ€™enseignant et bouton -->
  <div class="lesson-header">
    <div class="teacher-info">
      <img class="avatar" src="https://via.placeholder.com/40" alt="avatar" />
      <div>
        <div class="name">ğŸ‘©â€ğŸ« {{ lesson.teacher }}</div>
        <div class="date">ğŸ“… {{ lesson.date | date: 'dd/MM/yyyy HH:mm' }}</div>
      </div>
    </div>

    <button *ngIf="showJoinButton()" class="join-btn" (click)="enterVirtualClass()">
      ğŸ”— Rejoindre la classe
    </button>
  </div>


  <!-- ğŸ“‚ Corps principal -->
  <div class="lesson-body">

    <!-- ğŸ“ˆ Statistiques -->
    <div *ngIf="isPast()" class="stats">
      âœ… TÃ¢ches terminÃ©es : {{ lesson.tasksDone || 0 }}<br />
      âœ… Questions rÃ©solues : {{ lesson.questionsDone || 0 }}
    </div>

  </div>

  <!-- ğŸ§² Zones de glisser-dÃ©poser -->
  <div class="lesson-dnd">
  <div class="drop-zone">
    <h4>ğŸ“Œ TÃ¢ches</h4>
    <div cdkDropList [id]="'tasks-' + lesson.id" [cdkDropListData]="lesson.tasks" [cdkDropListConnectedTo]="taskDropIds"
      (cdkDropListDropped)="dropItem($event, 'task')">
      <div *ngFor="let task of lesson.tasks; let i = index"
           cdkDrag class="drag-item"
           (click)="onPastItemClick(task, 'task')"
           [class.clickable]="isPast()">
        {{ i + 1 }}. ğŸ›  {{ task }}
      </div>
    </div>
  </div>

  <div class="drop-zone">
    <h4>â“ Questions</h4>
    <div cdkDropList [id]="'questions-' + lesson.id" [cdkDropListData]="lesson.questions" [cdkDropListConnectedTo]="questionDropIds"
      (cdkDropListDropped)="dropItem($event, 'question')">
      <div *ngFor="let q of lesson.questions; let i = index"
           cdkDrag class="drag-item"
           (click)="onPastItemClick(q, 'question')"
           [class.clickable]="isPast()">
        {{ i + 1 }}. ğŸ’¬ {{ q }}
      </div>
    </div>
  </div>
</div>



</div>
