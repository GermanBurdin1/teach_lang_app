<div class="lesson-card">

  <!-- 🧑‍🏫 En-tête de l’enseignant et bouton -->
  <div class="lesson-header">
    <div class="teacher-info">
      <img class="avatar" src="https://via.placeholder.com/40" alt="avatar" />
      <div>
        <div class="name">👩‍🏫 {{ lesson.teacher }}</div>
        <div class="date">📅 {{ lesson.date | date: 'dd/MM/yyyy HH:mm' }}</div>
      </div>
    </div>

    <button *ngIf="showJoinButton()" class="join-btn" (click)="enterVirtualClass()">
      🔗 Rejoindre la classe
    </button>
  </div>


  <!-- 📂 Corps principal -->
  <div class="lesson-body">

    <!-- 📈 Statistiques -->
    <div *ngIf="isPast()" class="stats">
      ✅ Tâches terminées : {{ lesson.tasksDone || 0 }}<br />
      ✅ Questions résolues : {{ lesson.questionsDone || 0 }}
    </div>

  </div>

  <!-- 🧲 Zones de glisser-déposer -->
  <div class="lesson-dnd">
    <div class="drop-zone">
      <h4>📌 Tâches</h4>
      <div cdkDropList [id]="'tasks-' + lesson.id" [cdkDropListData]="lesson.tasks"
        (cdkDropListDropped)="dropItem($event, 'task')">
        <div *ngFor="let task of lesson.tasks" cdkDrag class="drag-item">
          🛠 {{ task }}
        </div>
      </div>
    </div>

    <div class="drop-zone">
      <h4>❓ Questions</h4>
      <div cdkDropList [id]="'questions-' + lesson.id" [cdkDropListData]="lesson.questions"
        (cdkDropListDropped)="dropItem($event, 'question')">
        <div *ngFor="let q of lesson.questions" cdkDrag class="drag-item">
          💬 {{ q }}
        </div>
      </div>
    </div>
  </div>


</div>
