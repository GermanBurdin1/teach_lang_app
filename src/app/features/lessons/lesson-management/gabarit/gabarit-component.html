<div class="gabarit-overlay" (click)="close()" *ngIf="visible">
  <div class="gabarit" (click)="$event.stopPropagation()">
    <h3>Matériel du cours ({{ lesson.date | date: 'dd/MM/yyyy' }})</h3>

    <!-- Textes -->
    <div class="zone text-zone">
      <div class="zone-header">
        <span>📝 Textes</span>
        <button *ngIf="!readonly" (click)="add('text')">➕</button>
      </div>
      <div *ngIf="!readonly" cdkDropList [cdkDropListData]="texts" (cdkDropListDropped)="onDrop($event, 'texts')">
        <div *ngFor="let t of texts" cdkDrag class="item">{{ t }}</div>
      </div>
      <div *ngIf="readonly">
        <div *ngFor="let t of texts" class="item">{{ t }}</div>
      </div>
    </div>

    <!-- Audios -->
    <div class="zone audio-zone">
      <div class="zone-header">
        <span>🔊 Audios</span>
        <button *ngIf="!readonly" (click)="add('audio')">➕</button>
      </div>
      <div *ngIf="!readonly" cdkDropList [cdkDropListData]="audios" (cdkDropListDropped)="onDrop($event, 'audios')">
        <div *ngFor="let a of audios" cdkDrag class="item">{{ a }}</div>
      </div>
      <div *ngIf="readonly">
        <div *ngFor="let a of audios" class="item">{{ a }}</div>
      </div>
    </div>

    <!-- Vidéos -->
    <div class="zone video-zone">
      <div class="zone-header">
        <span>🎬 Vidéos</span>
        <button *ngIf="!readonly" (click)="add('video')">➕</button>
      </div>
      <div *ngIf="!readonly" cdkDropList [cdkDropListData]="videos" (cdkDropListDropped)="onDrop($event, 'videos')">
        <div *ngFor="let v of videos" cdkDrag class="item">{{ v }}</div>
      </div>
      <div *ngIf="readonly">
        <div *ngFor="let v of videos" class="item">{{ v }}</div>
      </div>
    </div>

  </div>
</div>
