<div class="container words-container" [ngClass]="{
  'zoom-active': zoomedGalaxy,
  'zoom-to-galaxy': isZoomingToGalaxy
}">
  <div class="search-bar-container">
    <div class="search-bar">
      <input [(ngModel)]="searchQuery" placeholder="Rechercher un mot ou une expression..." (input)="searchWord()" />
    </div>
    <button class="add-word-btn" (click)="openGlobalAddWordOrExpressionModal()" title="Ajouter un mot ou expression">
      <i class="fas fa-plus"></i>
    </button>
  </div>

  <div *ngIf="searchResults.length" class="search-results">
    <div *ngFor="let result of searchResults" class="search-result-item" (click)="navigateToWord(result)"
      title="–ü–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–æ–≤—É">
      <strong>{{ result.word }}</strong> ‚Äî {{ result.translation }}
      <div style="font-size: 12px; color: gray;">
        {{ result.fullPath }}
      </div>
    </div>
  </div>


  <h2 *ngIf="!zoomedGalaxy">
  </h2>
  <div class="main-content">
    <div class="zone-libre-panel" *ngIf="!zoomedGalaxy">
      <!-- –ó–æ–Ω–∞ —Å –Ω–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–º–∏ —Å–ª–æ–≤–∞–º–∏ - –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–æ –Ω–∞ —Ñ—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π -->
      <div class="zone-libre-toggle" (click)="toggleZoneLibre()">
        üì¶ {{ showZoneLibre ? 'Masquer' : 'Mots sans cat√©gorie' }}
      </div>

      <div class="zone-libre-wrapper" *ngIf="zoomedZoneLibre">
        <div class="zone-libre-container">
          <h3>Mots sans cat√©gorie</h3>
          <div class="zone-libre-word-list">
            <div class="zone-libre-card" *ngFor="let word of orphanWords" draggable="true"
              (dragstart)="onDragStart($event, word)">
              <div><strong>{{ word.word }}</strong></div>
              <div>{{ word.translation }}</div>
              <div style="font-size: 12px; color: gray">{{ word.type }}</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="galaxies cosmic-galaxies" *ngIf="!zoomedGalaxy">
      <div *ngFor="let galaxy of galaxies; let i = index" class="galaxy-wrapper galaxy-cosmic" #galaxyWrapper>
        <div class="galaxy galaxy-enhanced" (click)="zoomIntoGalaxy(galaxy)" (drop)="onDropToGalaxy($event, galaxy.name)"
          (dragover)="onDragOver($event)">
          <svg #galaxyElement viewBox="0 0 200 200" class="galaxy-svg galaxy-stellar" 
               preserveAspectRatio="xMidYMid meet"
               shape-rendering="geometricPrecision"
               text-rendering="optimizeLegibility">
            <!-- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –±–æ–ª–µ–µ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã –≥–∞–ª–∞–∫—Ç–∏–∫ -->
            <defs>
              <!-- –û—Å–Ω–æ–≤–Ω–æ–π –≥—Ä–∞–¥–∏–µ–Ω—Ç –≥–∞–ª–∞–∫—Ç–∏–∫–∏ - –±–æ–ª–µ–µ —Ç–æ–Ω–∫–∏–π –∏ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π -->
              <radialGradient [attr.id]="'galaxyGradient-' + galaxy.sanitizedName" cx="50%" cy="50%" r="50%">
                <stop offset="0%" style="stop-color:#6366f1; stop-opacity:0.8" />
                <stop offset="25%" style="stop-color:#4338ca; stop-opacity:0.6" />
                <stop offset="50%" style="stop-color:#3730a3; stop-opacity:0.4" />
                <stop offset="75%" style="stop-color:#1e1b4b; stop-opacity:0.2" />
                <stop offset="100%" style="stop-color:#0f0f23; stop-opacity:0.1" />
              </radialGradient>

              <!-- –°–ø–∏—Ä–∞–ª—å–Ω—ã–µ —Ä—É–∫–∞–≤–∞ –≥–∞–ª–∞–∫—Ç–∏–∫–∏ -->
              <radialGradient [attr.id]="'spiralGradient-' + galaxy.sanitizedName" cx="30%" cy="30%" r="70%">
                <stop offset="0%" style="stop-color:#8b5cf6; stop-opacity:0.3" />
                <stop offset="40%" style="stop-color:#7c3aed; stop-opacity:0.2" />
                <stop offset="80%" style="stop-color:#5b21b6; stop-opacity:0.1" />
                <stop offset="100%" style="stop-color:transparent; stop-opacity:0" />
              </radialGradient>

              <!-- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è —è—Ä–∫–æ—Å—Ç—å -->
              <radialGradient [attr.id]="'coreGradient-' + galaxy.sanitizedName" cx="50%" cy="50%" r="30%">
                <stop offset="0%" style="stop-color:#fbbf24; stop-opacity:0.4" />
                <stop offset="50%" style="stop-color:#f59e0b; stop-opacity:0.2" />
                <stop offset="100%" style="stop-color:transparent; stop-opacity:0" />
              </radialGradient>

              <!-- –ó–≤–µ–∑–¥–Ω–æ–µ –ø–æ–ª–µ - –±–æ–ª–µ–µ —Ç–æ–Ω–∫–æ–µ -->
              <radialGradient id="starsGradient" cx="50%" cy="50%" r="50%">
                <stop offset="0%" stop-color="rgba(255,255,255,0.4)" />
                <stop offset="70%" stop-color="rgba(255,255,255,0.1)" />
                <stop offset="100%" stop-color="rgba(255,255,255,0.05)" />
              </radialGradient>

              <!-- –ü–ª–∞–Ω–µ—Ç—ã - –±–æ–ª–µ–µ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ -->
              <radialGradient id="planetGradient" cx="30%" cy="30%" r="50%">
                <stop offset="0%" stop-color="#fcd34d" />
                <stop offset="50%" stop-color="#f59e0b" />
                <stop offset="100%" stop-color="#d97706" />
              </radialGradient>

              <!-- –ë–æ–ª–µ–µ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –∑–≤–µ–∑–¥–æ—á–∫–∏ -->
              <pattern [attr.id]="'stars-' + galaxy.sanitizedName" x="0" y="0" width="60" height="60" patternUnits="userSpaceOnUse">
                <circle cx="8" cy="12" r="0.3" fill="white" opacity="0.6"/>
                <circle cx="25" cy="8" r="0.2" fill="white" opacity="0.4"/>
                <circle cx="45" cy="20" r="0.4" fill="white" opacity="0.7"/>
                <circle cx="15" cy="35" r="0.2" fill="white" opacity="0.5"/>
                <circle cx="35" cy="45" r="0.3" fill="white" opacity="0.6"/>
                <circle cx="52" cy="5" r="0.2" fill="white" opacity="0.4"/>
                <circle cx="5" cy="55" r="0.3" fill="white" opacity="0.5"/>
                <circle cx="42" cy="38" r="0.2" fill="white" opacity="0.4"/>
                <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ–ª–∫–∏–µ –∑–≤–µ–∑–¥—ã -->
                <circle cx="20" cy="25" r="0.1" fill="white" opacity="0.3"/>
                <circle cx="38" cy="15" r="0.1" fill="white" opacity="0.3"/>
                <circle cx="55" cy="40" r="0.1" fill="white" opacity="0.3"/>
                <circle cx="12" cy="50" r="0.1" fill="white" opacity="0.3"/>
              </pattern>

              <!-- –ü–∞—Ç—Ç–µ—Ä–Ω —Å–ø–∏—Ä–∞–ª—å–Ω—ã—Ö —Ä—É–∫–∞–≤–æ–≤ -->
              <pattern [attr.id]="'spiralArms-' + galaxy.sanitizedName" x="0" y="0" width="100" height="100" patternUnits="userSpaceOnUse">
                <path d="M10,50 Q30,20 50,50 Q70,80 90,50" stroke="rgba(139,92,246,0.2)" stroke-width="2" fill="none" opacity="0.6"/>
                <path d="M50,10 Q80,30 50,50 Q20,70 50,90" stroke="rgba(139,92,246,0.15)" stroke-width="1.5" fill="none" opacity="0.5"/>
              </pattern>
            </defs>

            <!-- –§–æ–Ω–æ–≤–æ–µ –∑–≤–µ–∑–¥–Ω–æ–µ –ø–æ–ª–µ -->
            <ellipse cx="100" cy="100" rx="98" ry="68" [attr.fill]="'url(#stars-' + galaxy.sanitizedName + ')'" opacity="0.2"/>

            <!-- –°–ø–∏—Ä–∞–ª—å–Ω—ã–µ —Ä—É–∫–∞–≤–∞ -->
            <ellipse cx="100" cy="100" rx="85" ry="58" 
              [attr.fill]="'url(#spiralArms-' + galaxy.sanitizedName + ')'" 
              opacity="0.3" 
              style="mix-blend-mode: screen;"/>

            <!-- –û—Å–Ω–æ–≤–Ω–æ–µ —Ç–µ–ª–æ –≥–∞–ª–∞–∫—Ç–∏–∫–∏ -->
            <ellipse cx="100" cy="100" rx="80" ry="55"
              [attr.fill]="'url(#galaxyGradient-' + galaxy.sanitizedName + ')'" 
              style="filter: drop-shadow(0 0 12px rgba(99, 102, 241, 0.3));"/>

            <!-- –°–ø–∏—Ä–∞–ª—å–Ω—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç –¥–ª—è –æ–±—ä–µ–º–∞ -->
            <ellipse cx="100" cy="100" rx="70" ry="48" 
              [attr.fill]="'url(#spiralGradient-' + galaxy.sanitizedName + ')'" 
              opacity="0.6"/>

            <!-- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è —è—Ä–∫–∞—è –æ–±–ª–∞—Å—Ç—å -->
            <ellipse cx="100" cy="100" rx="25" ry="18" 
              [attr.fill]="'url(#coreGradient-' + galaxy.sanitizedName + ')'" 
              opacity="0.8"/>

            <!-- –í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–≤–µ—á–µ–Ω–∏–µ -->
            <ellipse cx="100" cy="100" rx="60" ry="40" 
              fill="url(#starsGradient)" 
              opacity="0.2"/>

            <!-- –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–µ–º—ã –≤ —Ü–µ–Ω—Ç—Ä–µ -->
            <text x="100" y="105" fill="rgba(255,255,255,0.95)" font-size="15px" font-weight="600" 
                  font-family="Arial, sans-serif"
                  text-anchor="middle" 
                  dominant-baseline="middle"
                  text-rendering="optimizeLegibility"
                  shape-rendering="geometricPrecision"
                  style="filter: drop-shadow(0 1px 3px rgba(0,0,0,0.9)); 
                         text-shadow: 0 0 6px rgba(255,255,255,0.3);
                         -webkit-font-smoothing: antialiased;
                         -moz-osx-font-smoothing: grayscale;">
              {{ galaxy.name }}
            </text>

            <!-- –ü–ª—é—Å–∏–∫ –ø–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º -->
            <foreignObject x="90" y="120" width="30" height="30">
              <button class="galaxy-add-button cosmic-button" (click)="onGalaxyAddButtonClick($event, galaxy.name)"
                title="Ajouter un mot ou une expression">
                +
              </button>
            </foreignObject>

            <!-- –ü–æ–¥—Ç–µ–º—ã (–ø–ª–∞–Ω–µ—Ç—ã) —Å –±–æ–ª–µ–µ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–º —Å—Ç–∏–ª–µ–º -->
            <g *ngFor="let subtopic of galaxy.subtopics">
              <title>
                {{ subtopic.name }} ({{ getWordAndExpressionCount(galaxy.name, subtopic.name) }})
              </title>
              <!-- –ü–ª–∞–Ω–µ—Ç–∞ -->
              <circle [attr.cx]="subtopic.x" [attr.cy]="subtopic.y" r="7" 
                fill="url(#planetGradient)"
                style="filter: drop-shadow(0 0 4px rgba(252, 211, 77, 0.6));">
              </circle>
              <!-- –ö–æ–ª—å—Ü–∞ –≤–æ–∫—Ä—É–≥ –ø–ª–∞–Ω–µ—Ç - –±–æ–ª–µ–µ —Ç–æ–Ω–∫–∏–µ -->
              <ellipse [attr.cx]="subtopic.x" [attr.cy]="subtopic.y" rx="10" ry="2.5" 
                fill="none" stroke="rgba(252,211,77,0.3)" stroke-width="0.3" opacity="0.6"/>
              <ellipse [attr.cx]="subtopic.x" [attr.cy]="subtopic.y" rx="13" ry="3.2" 
                fill="none" stroke="rgba(252,211,77,0.2)" stroke-width="0.2" opacity="0.4"/>
            </g>
          </svg>

        </div>
      </div>
    </div>
  </div>


  <!-- –ó—É–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≥–∞–ª–∞–∫—Ç–∏–∫–∞ -->
  <div class="zoomed-galaxy" *ngIf="zoomedGalaxy && !isZoomingToGalaxy">
    <button class="back-btn" (click)="resetZoom()">Retourner √† la page principale</button>
    <div class="zoom-container" [ngStyle]="isZoomingToPlanet ? zoomStyle : {}">
      <svg viewBox="0 0 600 600" class="galaxy-svg zoom"
           preserveAspectRatio="xMidYMid meet"
           shape-rendering="geometricPrecision"
           text-rendering="optimizeLegibility">
        <!-- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç –¥–ª—è –∑—É–º–∞ -->
        <defs>
          <radialGradient id="galaxyGradient-zoom" cx="50%" cy="50%" r="50%">
            <stop offset="0%" style="stop-color:#7d5ba6; stop-opacity:1" />
            <stop offset="100%" style="stop-color:#2c2a4a; stop-opacity:1" />
          </radialGradient>

          <radialGradient id="planetGradient" cx="50%" cy="50%" r="50%">
            <stop offset="0%" stop-color="#ffd27f" />
            <stop offset="60%" stop-color="#ff914d" />
            <stop offset="100%" stop-color="#cc4b2c" />
          </radialGradient>
        </defs>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π —ç–ª–ª–∏–ø—Å –≥–∞–ª–∞–∫—Ç–∏–∫–∏ -->
        <ellipse cx="300" cy="300" rx="270" ry="180" fill="url(#galaxyGradient-zoom)" />

        <!-- –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–µ–º—ã -->
        <text x="300" y="310" fill="white" font-size="42px" font-weight="bold" font-family="Arial" text-anchor="middle">
          {{ zoomedGalaxy.name }}
        </text>

        <!-- –ü–ª–∞–Ω–µ—Ç—ã-–ø–æ–¥—Ç–µ–º—ã -->
        <g *ngFor="let subtopic of zoomedGalaxy.subtopics">
          <title>
            ({{ getWordAndExpressionCount(subtopic.name, zoomedGalaxy.name) }})
          </title>
          <circle class="subtopic-planet" [ngClass]="{ 'pulse': pendingSubtopicWords.length > 0 }"
            [attr.cx]="subtopic.x * 3" [attr.cy]="subtopic.y * 3" r="60" fill="url(#planetGradient)"
            (dragover)="onDragOver($event)" (drop)="onDropToSubtopic($event, zoomedGalaxy.name, subtopic.name)"
            (click)="onSubtopicClick(zoomedGalaxy.name, subtopic.name)">
          </circle>

          <foreignObject [attr.x]="subtopic.x * 3 - 50" [attr.y]="subtopic.y * 3 - 20" width="100" height="40">
            <div #labelRef class="subtopic-label-wrapper">
              {{ subtopic.name }}
            </div>
          </foreignObject>
        </g>

      </svg>
      <div class="zone-libre-wrapper" *ngIf="postponedWordsByGalaxy[zoomedGalaxy.name]?.length">
        <div class="zone-libre-toggle" (click)="togglePostponedList(zoomedGalaxy.name)">
          üì• {{ collapsedPostponedList[zoomedGalaxy.name] ? 'Afficher les mots report√©s' : 'Masquer les mots report√©s' }}
        </div>

        <div class="zone-libre-container" *ngIf="!collapsedPostponedList[zoomedGalaxy.name]">
          <div class="zone-libre-word-list">
            <div class="zone-libre-card" *ngFor="let word of postponedWordsByGalaxy[zoomedGalaxy.name]" draggable="true"
              (dragstart)="onDragStart($event, word)">
              <strong>{{ word.word }}</strong> ‚Äî {{ word.translation }}
              <div style="font-size: 12px; color: gray">{{ word.type }}</div>
            </div>
          </div>
        </div>
      </div>

      <div class="pending-word" *ngIf="pendingSubtopicWords.length">
        <div class="zone-libre-card dragging-preview" *ngIf="activePendingWord" draggable="true"
          (dragstart)="onDragStart($event, activePendingWord)">
          <strong>{{ activePendingWord.word }}</strong> ‚Äî {{ activePendingWord.translation }}
          <div style="font-size: 12px; color: gray">{{ activePendingWord.type }}</div>
        </div>

      </div>
      <div class="subtopic-prompt" *ngIf="pendingSubtopicWords.length">
        <h3 *ngIf="activePendingWord">ü™ê √Ä quel sous-th√®me appartient "{{ activePendingWord.word }}" ?</h3>
        <button class="postpone-btn" (click)="postponePendingWord()">Reporter</button>
      </div>
    </div>
  </div>


</div>


<!-- üåå –ú–æ–¥–∞–ª–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è -->
<div class="modal-overlay" *ngIf="showGlobalAddWordOrExpressionModal">
  <div class="add-entry-modal">
    <button class="add-entry-modal__close-btn" (click)="closeGlobalAddWordOrExpressionModal()" aria-label="Fermer">
      <i class="fas fa-times"></i>
    </button>

    <h2 class="add-entry-modal__title">Ajouter un mot ou expression</h2>

    <!-- –¢–∏–ø –∫–∞—Ä—Ç–æ—á–∫–∏ -->
    <div class="add-entry-modal__type-toggle">
      <button (click)="toggleGlobalType()" class="add-entry-modal__toggle-type"
        [attr.aria-label]="'Type: ' + (newGlobalType === 'word' ? 'Mot' : 'Expression')">
        {{ newGlobalType === 'word' ? '‚û§ Mot' : '‚û§ Expression' }}
      </button>
    </div>

    <!-- –Ø–∑—ã–∫–∏ -->
    <div class="lang-selectors">
      <label>De la langue :
        <select [(ngModel)]="sourceLang" (change)="onLangChangeAttempt()" [disabled]="isMultiEntryMode" name="sourceLang">
          <option value="ru">russe</option>
          <option value="fr">fran√ßais</option>
          <option value="en">anglais</option>
        </select>
      </label>

      <label>Vers la langue :
        <select [(ngModel)]="targetLang" (change)="onLangChangeAttempt()" [disabled]="isMultiEntryMode" name="targetLang">
          <option value="ru">russe</option>
          <option value="fr">fran√ßais</option>
          <option value="en">anglais</option>
        </select>
      </label>

      <div *ngIf="isMultiEntryMode" class="entry-warning">‚ö†Ô∏è Les langues ne peuvent pas √™tre modifi√©es lors d'un ajout multiple</div>
    </div>

    <!-- üîÅ –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–ª—è -->
    <div *ngFor="let entry of entries; let i = index" class="entry-block">
      <input [(ngModel)]="entry.word" placeholder="Mot/expression" (ngModelChange)="onEntryChanged(i)"
        class="add-entry-modal__input" />

      <input [(ngModel)]="entry.translation" placeholder="Traduction" class="add-entry-modal__input"
        (ngModelChange)="onTranslationChanged(entry)" />

      <!-- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É –ø–µ—Ä–µ–≤–æ–¥–∞ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ—Ç –≤–≤–µ–¥—ë–Ω–Ω–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞ -->
      <button *ngIf="!entry.translation?.trim()" (click)="autoTranslateWord(i)" title="Traduction automatique"
        class="translate-btn">
        üåç
      </button>

      <app-grammar-fields #grammarFieldsRef *ngIf="newGlobalType === 'word' || newGlobalType === 'expression'"
        [(grammar)]="entry.grammar" [showValidateButton]="false"> <!-- üõë —Å–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –∑–¥–µ—Å—å -->
      </app-grammar-fields>



      <button *ngIf="entries.length > 1" (click)="removeEntry(i)">üóë</button>
    </div>

    <!-- ‚ûï –î–æ–±–∞–≤–∏—Ç—å –µ—â—ë -->
    <button *ngIf="hasStartedTypingFirstEntry && !isMultiEntryMode" (click)="enableMultiEntry()"
      class="generate-button">
      ‚ûï Ajouter plus
    </button>

    <!-- –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—á—ë—Ç—á–∏–∫ –¢–û–õ–¨–ö–û –µ—Å–ª–∏ –≤–∫–ª—é—á—ë–Ω multi-entry -->
    <div *ngIf="isMultiEntryMode" class="limit-hint">
      Reste {{ maxEntries - entries.length }} sur {{ maxEntries }}
    </div>


    <!-- –ï—Å–ª–∏ –¥–æ–±–∞–≤–ª—è–µ–º –ì–õ–û–ë–ê–õ–¨–ù–û (–Ω–µ —á–µ—Ä–µ–∑ –≥–∞–ª–∞–∫—Ç–∏–∫—É) -->
    <div *ngIf="!isFromGalaxyShortcut">
      <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏—è -->
      <select [(ngModel)]="selectedGalaxy" (change)="onGalaxySelected()" class="add-entry-modal__select" name="selectedGalaxy">
        <option value="">Sans cat√©gorie</option>
        <option *ngFor="let galaxy of galaxies" [value]="galaxy.name">{{ galaxy.name }}</option>
      </select>

      <!-- –ü–æ–¥—Ç–µ–º–∞ -->
      <select *ngIf="availableSubtopics.length" [(ngModel)]="selectedSubtopic" class="add-entry-modal__select" name="selectedSubtopic">
        <option value="" disabled selected>Choisir un sous-th√®me</option>
        <option *ngFor="let subtopic of availableSubtopics" [value]="subtopic">{{ subtopic }}</option>
      </select>
    </div>

    <!-- –ï—Å–ª–∏ –¥–æ–±–∞–≤–ª—è–µ–º —á–µ—Ä–µ–∑ –≥–∞–ª–∞–∫—Ç–∏–∫—É (–ø–ª—é—Å–∏–∫ –≤–Ω—É—Ç—Ä–∏ –≥–∞–ª–∞–∫—Ç–∏–∫–∏) -->
    <div *ngIf="isFromGalaxyShortcut">
      <!-- –¢–æ–ª—å–∫–æ –ü–æ–¥—Ç–µ–º–∞ -->
      <select [(ngModel)]="selectedSubtopic" class="add-entry-modal__select" name="selectedSubtopicShortcut">
        <option value="">Sans cat√©gorie</option> <!-- –í–∞–∂–Ω–æ: –¥–æ–±–∞–≤–ª—è–µ–º –≤—Ä—É—á–Ω—É—é -->
        <option *ngFor="let subtopic of availableSubtopics" [value]="subtopic">{{ subtopic }}</option>
      </select>
    </div>


    <!-- –ü–æ–¥—Ç–µ–º–∞ -->
    <select *ngIf="availableSubtopics.length && !isFromGalaxyShortcut" [(ngModel)]="selectedSubtopic"
      class="add-entry-modal__select">
      <option value="" disabled selected>Choisir un sous-th√®me</option>
      <option *ngFor="let subtopic of availableSubtopics" [value]="subtopic">{{ subtopic }}</option>
    </select>

    <!-- GPT –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è -->
    <button *ngIf="!isFromGalaxyShortcut" class="generate-button" (click)="generateWithGPT()">
      ü§ñ Classification automatique
    </button>

    <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ -->
    <div *ngIf="addSuccessMessage" class="add-entry-modal__message">
      {{ addSuccessMessage }}
    </div>

    <!-- –ö–Ω–æ–ø–∫–∏ -->
    <div class="add-entry-modal__actions">
      <button (click)="isMultiEntryMode ? saveAll() : saveGlobalWordOrExpression()" class="add-entry-modal__button"
        [disabled]="entries.length === 0 || !entries[0].word.trim()">
        {{ isMultiEntryMode ? 'Tout sauvegarder' : 'Ajouter le mot' }}
      </button>
      <button class="add-entry-modal__button add-entry-modal__cancel" (click)="closeGlobalAddWordOrExpressionModal()">
        Annuler
      </button>
    </div>

  </div>
</div>

<!-- –ú–æ–¥–∞–ª–∫–∞ –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –±–µ–∑ –ø–æ–¥—Ç–µ–º—ã -->
<div class="modal-overlay" *ngIf="showPostAddModal">
  <div class="confirmation-modal">
    <p>{{ confirmationMessage }}</p>
    <div class="confirmation-modal__actions">
      <button class="confirmation-modal__button" (click)="stayOnGlobalPage()">Rester ici</button>
      <button class="confirmation-modal__button" (click)="goToPostponedWords()">Ouvrir la liste sans cat√©gorie</button>
    </div>
  </div>
</div>
