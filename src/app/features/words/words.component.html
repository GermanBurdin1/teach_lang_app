<div class="container" [class.zoom-active]="zoomedGalaxy">
  <h2 *ngIf="!zoomedGalaxy">Выберите категорию</h2>

  <div class="galaxies" *ngIf="!zoomedGalaxy">
    <div *ngFor="let galaxy of galaxies" class="galaxy-wrapper">
      <div class="galaxy" (mouseenter)="hoverGalaxy(galaxy)" (mouseleave)="hoverGalaxy(null)"
        (click)="zoomIntoGalaxy(galaxy)">
        <svg viewBox="0 0 200 200" class="galaxy-svg">
          <!-- Фиолетовый круг -->
          <circle cx="100" cy="100" r="80" fill="#f6e5ff" />

          <!-- Связи подтем с центром -->
          <line *ngFor="let subtopic of galaxy.subtopics" [attr.x1]="100" [attr.y1]="100" [attr.x2]="subtopic.x"
            [attr.y2]="subtopic.y" stroke="black" stroke-width="2" />

          <!-- Центральный круг -->
          <circle cx="100" cy="100" r="20" fill="black" />

          <!-- Подтемы -->
          <circle *ngFor="let subtopic of galaxy.subtopics" [attr.cx]="subtopic.x" [attr.cy]="subtopic.y" r="8"
            fill="black">
          </circle>
        </svg>
        <p>{{ galaxy.name }}</p>
      </div>
    </div>
  </div>

  <!-- Зумированный вид -->
  <div class="zoomed-galaxy" *ngIf="zoomedGalaxy">
    <button class="back-btn" (click)="resetZoom()">Вернуться</button>
    <h3>{{ zoomedGalaxy.name }}</h3>

    <svg viewBox="0 0 600 600" class="galaxy-svg zoom">
      <!-- Увеличенный фиолетовый круг -->
      <circle cx="300" cy="300" r="240" fill="#f6e5ff" />

      <!-- Связи подтем с центром -->
      <line *ngFor="let subtopic of zoomedGalaxy.subtopics" [attr.x1]="300" [attr.y1]="300" [attr.x2]="subtopic.x * 3"
        [attr.y2]="subtopic.y * 3" stroke="black" stroke-width="4" />

      <!-- Центральный круг -->
      <circle cx="300" cy="300" r="60" fill="black" />

      <!-- Подтемы -->
      <g *ngFor="let subtopic of zoomedGalaxy.subtopics">
        <circle [attr.cx]="subtopic.x * 3" [attr.cy]="subtopic.y * 3" r="30" fill="black"
          (click)="onSubtopicClick(subtopic)" style="cursor: pointer;">
        </circle>
        <text [attr.x]="subtopic.textX * 3" [attr.y]="subtopic.textY * 3" fill="black" font-size="24px"
          font-family="Arial">
          {{ subtopic.name }}
        </text>
      </g>
    </svg>
  </div>

</div>
