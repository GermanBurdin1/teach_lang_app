<div class="online-lessons">
  <!-- –û—Å–Ω–æ–≤–Ω—ã–µ –≤–∫–ª–∞–¥–∫–∏ (–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ, –£—á–µ–Ω–∏–∫–∏, –ì—Ä—É–ø–ø—ã, –£—á–∏—Ç–µ–ª—è, –ó–∞—è–≤–∫–∏) -->
  <ul class="nav nav-tabs mb-3">
    <li class="nav-item" *ngFor="let tab of ['–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ', '–£—á–µ–Ω–∏–∫–∏', '–ì—Ä—É–ø–ø—ã', '–£—á–∏—Ç–µ–ª—è', '–ó–∞—è–≤–∫–∏']">
      <a class="nav-link" [class.active]="activeLessonTab === tab" (click)="switchLessonTab(tab)">
        {{ tab }}
      </a>
    </li>
  </ul>

  <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–ª—è –ø–µ—Ä–≤–æ–π –≤–∫–ª–∞–¥–∫–∏ "–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ" -->
  <div *ngIf="activeLessonTab === '–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ'">
    <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –∏–∑ –ª–æ–≥–∏–∫–∏ –∫–∞–ª–µ–Ω–¥–∞—Ä—è -->
    <p>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —É—Ä–æ–∫–æ–≤</p>
    <div class="d-flex justify-content-between align-items-center mb-3">
      <!-- –ë–ª–æ–∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–µ–¥–µ–ª—è–º–∏ -->
      <div class="d-flex align-items-center">
        <button class="btn btn-outline-secondary ms-2" (click)="previousWeek()">&lt;</button>
        <span>{{ currentWeekStart | date: 'd MMM' }} - {{ getWeekDates()[6] | date: 'd MMM' }}</span>
        <button class="btn btn-outline-secondary ms-2" (click)="nextWeek()">&gt;</button>
      </div>

      <!-- –ë–ª–æ–∫ –≤—ã–±–æ—Ä–∞ —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
      <div class="d-flex align-items-center mb-3">
        <div class="me-3">
          <label class="form-label">–ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å</label>
          <select class="form-select">
            <option *ngFor="let timezone of timezones">{{ timezone }}</option>
          </select>
        </div>
        <div class="position-relative">
          <button class="btn btn-outline-secondary" (click)="toggleSettingsMenu()">
            <i class="bi bi-gear"></i>
          </button>
          <div *ngIf="settingsMenuOpen" class="position-absolute bg-white border p-3" style="right: 0;">
            <label for="start-hour" class="form-label">–û—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã–µ —á–∞—Å—ã</label>
            <div class="d-flex align-items-center">
              <select id="start-hour" class="form-select w-auto" (change)="onStartHourChange($event)">
                <option *ngFor="let hour of hours" [value]="hour">{{ hour }}</option>
              </select>
              <span class="mx-2">–¥–æ</span>
              <select id="end-hour" class="form-select w-auto" (change)="onEndHourChange($event)">
                <option *ngFor="let hour of hours" [value]="hour">{{ hour }}</option>
              </select>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- –¢–∞–±–ª–∏—Ü–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è -->
    <table class="table table-bordered">
      <thead>
        <tr>
          <th>–í—Ä–µ–º—è</th>
          <th *ngFor="let day of getWeekDates()">{{ day | date: 'EEEE, d MMMM' }}</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let hour of filterHours()">
          <td class="time-label">{{ hour }}</td>
          <td *ngFor="let day of daysWithDates" (mouseenter)="showSelectButton(day, hour)"
            (mouseleave)="hideSelectButton(day, hour)" (click)="toggleTimeSlot(day, hour)"
            [ngClass]="{'active-slot': isTimeSlotActive(day, hour), 'current-time': isCurrentTime(day, hour)}">
            <ng-container *ngIf="!isTimeSlotActive(day, hour)">
              <button *ngIf="showButton[day + '-' + hour]" class="btn btn-primary btn-sm"
                (click)="selectSlot(day, hour); $event.stopPropagation()">
                –í—ã–±—Ä–∞—Ç—å
              </button>
            </ng-container>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
<div *ngIf="showModal" class="modal fade show d-block" tabindex="-1" role="dialog" aria-labelledby="modalTitle" aria-hidden="true" style="background: rgba(0, 0, 0, 0.5);">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content text-center" style="border-radius: 12px; padding: 1rem;">
      <div class="modal-header border-0 justify-content-center position-relative">
        <div class="modal-icon mb-3">
          <i class="bi bi-info-circle-fill" style="font-size: 48px; color: #007bff;"></i>
        </div>
        <button type="button" class="btn-close position-absolute" style="top: 10px; right: 10px;" aria-label="Close" (click)="closeModal()"></button>
      </div>
      <div class="modal-body">
        <h5 class="modal-title mb-3" id="modalTitle">–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —É—Ä–æ–∫–∞</h5>
        <p>–≠—Ç–æ –≤—Ä–µ–º—è –æ—Ç–º–µ—á–µ–Ω–æ –∫–∞–∫ –Ω–µ—Ä–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–æ—Å—Ç–∞–Ω–æ–≤–∫—É —É—Ä–æ–∫–∞ –Ω–∞ —ç—Ç–æ –≤—Ä–µ–º—è?</p>
      </div>
      <div class="modal-footer justify-content-center border-0">
        <button type="button" class="btn btn-outline-secondary me-3" (click)="closeModal()">–û—Ç–º–µ–Ω–∞</button>
        <button type="button" class="btn btn-primary" (click)="openNewLessonModal()">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
      </div>
    </div>
  </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –≤–∫–ª–∞–¥–∫–∞–º–∏ -->
<div *ngIf="showNewLessonModal" class="modal fade show d-block" tabindex="-1" role="dialog" aria-labelledby="newLessonModalTitle" aria-hidden="true" style="background: rgba(0, 0, 0, 0.5);">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content text-center" style="border-radius: 12px; padding: 1rem;">
      <div class="modal-header border-0 justify-content-between align-items-center">
        <h5 class="modal-title" id="newLessonModalTitle">–ù–æ–≤—ã–π —É—Ä–æ–∫</h5>
        <button type="button" class="btn-close" aria-label="Close" (click)="closeNewLessonModal()"></button>
      </div>
      <div class="modal-body">
        <!-- –í–∫–ª–∞–¥–∫–∏ -->
        <ul class="nav nav-tabs mb-3 justify-content-center">
          <li class="nav-item">
            <a class="nav-link" [class.active]="activeLessonTab === 'individual'" (click)="switchLessonTab('individual')">–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" [class.active]="activeLessonTab === 'group'" (click)="switchLessonTab('group')">–ì—Ä—É–ø–ø–æ–≤–æ–π</a>
          </li>
        </ul>

        <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–ª—è –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–≥–æ —É—Ä–æ–∫–∞ -->
        <div *ngIf="activeLessonTab === 'individual'">
          <input type="text" class="form-control mb-3" placeholder="–ü–æ–∏—Å–∫ —É—á–µ–Ω–∏–∫–æ–≤" />
          <div class="p-4 border rounded d-flex flex-column align-items-center">
            <div class="mb-3" style="font-size: 64px;">üëã</div>
            <p>–î–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —É—Ä–æ–∫–æ–≤ —Å–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–π—Ç–µ –∫–ª–∞—Å—Å</p>
            <button class="btn btn-primary">–ü–µ—Ä–µ–π—Ç–∏ –∫ —É—á–µ–Ω–∏–∫–∞–º</button>
          </div>
        </div>

        <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–ª—è –≥—Ä—É–ø–ø–æ–≤–æ–≥–æ —É—Ä–æ–∫–∞ -->
        <div *ngIf="activeLessonTab === 'group'">
          <input type="text" class="form-control mb-3" placeholder="–ü–æ–∏—Å–∫ –≥—Ä—É–ø–ø" />
          <div class="p-4 border rounded d-flex flex-column align-items-center">
            <div class="mb-3" style="font-size: 64px;">üë•</div>
            <p>–î–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —É—Ä–æ–∫–æ–≤ —Å–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–π—Ç–µ –∫–ª–∞—Å—Å</p>
            <button class="btn btn-primary">–ü–µ—Ä–µ–π—Ç–∏ –∫ –≥—Ä—É–ø–ø–∞–º</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>



  <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–ª—è –¥—Ä—É–≥–∏—Ö –≤–∫–ª–∞–¥–æ–∫ -->
  <div *ngIf="activeLessonTab === '–£—á–µ–Ω–∏–∫–∏'">
    <p>–ö–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –≤–∫–ª–∞–¥–∫–∏ "–£—á–µ–Ω–∏–∫–∏"</p>
  </div>
  <div *ngIf="activeLessonTab === '–ì—Ä—É–ø–ø—ã'">
    <p>–ö–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –≤–∫–ª–∞–¥–∫–∏ "–ì—Ä—É–ø–ø—ã"</p>
  </div>
  <div *ngIf="activeLessonTab === '–£—á–∏—Ç–µ–ª—è'">
    <p>–ö–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –≤–∫–ª–∞–¥–∫–∏ "–£—á–∏—Ç–µ–ª—è"</p>
  </div>
  <div *ngIf="activeLessonTab === '–ó–∞—è–≤–∫–∏'">
    <p>–ö–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –≤–∫–ª–∞–¥–∫–∏ "–ó–∞—è–≤–∫–∏"</p>
  </div>
</div>
